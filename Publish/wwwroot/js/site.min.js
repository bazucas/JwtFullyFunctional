function editFormatter(){return'<button id="btnEdit" class="btn btn-xs btn-default" type="button"><i class="glyphicon glyphicon-pencil"><\/i><\/button>'}function delFormatter(){return'<button id="btnDel" class="btn btn-xs btn-default" type="button"><i class="glyphicon glyphicon-trash"><\/i><\/button>'}function checkboxFormatter(n,t){var i=t.Id;return'<input type="checkbox" onclick="return false;" '+(n?'checked="checked"':"")+">"}function highLightRow(n){n.addClass("highlight").siblings().removeClass("highlight");n.attr("data-highlighted",!0).siblings().removeAttr("data-highlighted")}function getId(n){return $(n).closest("tr").data("uniqueid")}function deleteItem(n,t){BootstrapDialog.show({type:BootstrapDialog.TYPE_WARNING,title:"Please confirm",message:"Delete <strong>"+getCrudName(n,t)+"<\/strong> ?",draggable:!0,buttons:[{label:"Close",action:function(n){n.close()}},{id:"btnDelete",icon:"glyphicon glyphicon-trash",label:"Delete",cssClass:"btn-danger",hotkey:13,action:function(i){var r=this;r.disable();r.spin();i.setClosable(!1);$.ajax({url:"Delete/"+t,type:"post",cache:!1,success:function(r){if(r.success===!0)n.bootstrapTable("removeByUniqueId",t),i.close();else{i.setClosable(!0);i.setTitle("Delete Error");var u=i.getButton("btnDelete");u.stopSpin();i.setMessage("<strong>"+r.errorMessage+"<\/strong>")}}})}}]})}function getCrudName(n,t){var r=n.bootstrapTable("getRowByUniqueId",t),i=n.attr("data-crudname");return i===null&&(i=n.attr("data-unique-id")),r[i]}function editDialogHighlighted(n,t){t===undefined&&(t=n.find('tr[data-highlighted="true"]'));var i=getId(t);i!==undefined&&editDialog(n,i)}function editDialog(n,t){var r="Add item",i,u;t===undefined?t="":r="Edit <strong>"+getCrudName(n,t)+"<\/strong>";i=new BootstrapDialog({type:BootstrapDialog.TYPE_PRIMARY,title:r,message:"Loading please wait...",draggable:!0,onshown:function(){},buttons:[{label:"Close",action:function(n){n.close()}},{id:"btnsave",label:"Save",icon:"glyphicon glyphicon-ok",cssClass:"btn-success",enabled:!1,action:function(t){var i=this,r=$("#frmcrud").get(0);$("#frmcrud").one("submit",function(u){var f=$("#frmcrud :input").serialize();u.preventDefault();$.ajax({cache:!1,url:r.action,type:r.method,data:f,complete:function(){i.enable();i.stopSpin();t.setClosable(!0)},error:function(n){alert(n.status+"\n"+n.statusText)},success:function(i){i.Success?(updateGrid(n,i.Model),t.close()):$("#frmcrud").html(i)}})});i.disable();i.spin();t.setClosable(!1);$("#frmcrud").submit()}}]});i.open();u="Edit/"+t;$.ajax({url:u,type:"get",cache:!1,context:{dialog:i},success:function(n){this.dialog.$modalBody.html(n);var t=this.dialog.getButton("btnsave");t.enable()}})}function updateGrid(n,t){var i=t[n.data("unique-id")],r=n.find("tr[data-uniqueid='"+i+"']");r.length===0?n.bootstrapTable("insertRow",{index:0,row:t}):n.bootstrapTable("updateByUniqueId",{id:i,row:t});r=n.find("tr[data-uniqueid='"+i+"']");highLightRow(r)}